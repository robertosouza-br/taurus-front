<div class="lista-container">
  <!-- Breadcrumb -->
  <app-breadcrumb [items]="breadcrumbItems"></app-breadcrumb>

  <!-- Header -->
  <app-page-header
    title="Reservas"
    subtitle="Gerencie todas as reservas de unidades"
    icon="pi pi-bookmark"
    [actions]="headerActions">
  </app-page-header>

  <!-- Confirmação de exclusão -->
  <p-confirmDialog></p-confirmDialog>

  <!-- Tabela -->
  <app-data-table
    [data]="reservas"
    [columns]="colunas"
    [actions]="acoes"
    [totalRecords]="totalRegistros"
    [loading]="carregando"
    [lazy]="true"
    [rows]="50"
    (onLazyLoad)="onLazyLoad($event)">

    <ng-template appTableTemplate="blocoUnidade" let-reserva="rowData">
      <span class="bloco-unidade">
        <strong>{{ reserva.bloco }}</strong> / {{ reserva.unidade }}
      </span>
    </ng-template>

    <ng-template appTableTemplate="tipologia" let-reserva="rowData">
      <small class="tipologia-texto">{{ reserva.tipologia || reserva.tipoUnidade || '—' }}</small>
    </ng-template>

    <ng-template appTableTemplate="cliente" let-reserva="rowData">
      <div class="cliente-info">
        <span class="cliente-nome">{{ reserva.nomeCliente }}</span>
        <small class="cliente-cpf">{{ reserva.cpfCnpjCliente }}</small>
      </div>
    </ng-template>

    <ng-template appTableTemplate="imobiliaria" let-reserva="rowData">
      {{ reserva.nomeImobiliariaPrincipal || '—' }}
    </ng-template>

    <ng-template appTableTemplate="status" let-reserva="rowData">
      <p-tag
        [value]="getStatusLabel(reserva)"
        [severity]="getStatusSeverity(reserva)">
      </p-tag>
    </ng-template>
  </app-data-table>
</div>
