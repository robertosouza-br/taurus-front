<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [dismissableMask]="true"
  [style]="{width: '850px'}"
  [breakpoints]="{'960px': '90vw', '640px': '95vw'}"
  styleClass="unidade-detalhes-dialog"
  [showHeader]="false">

  <ng-container *ngIf="unidade">
    <!-- Header Customizado com Gradiente -->
    <div class="dialog-custom-header">
      <div class="header-content">
        <div class="header-icon">
          <i class="pi pi-home"></i>
        </div>
        <div class="header-text">
          <h2 class="header-title">Detalhes da Unidade</h2>
          <p class="header-subtitle">{{ unidade.empreendimento }} · Bloco {{ unidade.bloco }} · {{ unidade.unidade }}</p>
        </div>
      </div>
      <button 
        type="button" 
        class="p-dialog-header-close p-link" 
        (click)="fechar()">
        <span class="p-dialog-header-close-icon pi pi-times"></span>
      </button>
    </div>

    <!-- Badge de Status em Destaque -->
    <div class="status-destaque">
      <p-tag 
        [value]="getStatusLabel(unidade.codigoStatusUnidade)"
        [severity]="getStatusSeverity(unidade.codigoStatusUnidade)"
        [style]="{
          'background': getStatusColors(unidade.codigoStatusUnidade).bg,
          'border': '2px solid ' + getStatusColors(unidade.codigoStatusUnidade).border,
          'color': getStatusColors(unidade.codigoStatusUnidade).text,
          'font-size': '1rem',
          'padding': '0.5rem 1.5rem'
        }">
      </p-tag>
    </div>

    <!-- Cards de Informações -->
    <div class="grid">
      <!-- Card de Preço em Destaque -->
      <div class="col-12">
        <div class="detail-card price-card">
          <div class="price-content">
            <div class="price-header">
              <i class="pi pi-tag"></i>
              <span>Valor da Unidade</span>
            </div>
            <div class="price-value">{{ formatarPreco(unidade.preco) }}</div>
          </div>
        </div>
      </div>

      <!-- Características -->
      <div class="col-12 lg:col-6">
        <div class="detail-card">
          <div class="card-header">
            <i class="pi pi-info-circle"></i>
            <h3>Características</h3>
          </div>
          <div class="card-body">
            <div class="info-row">
              <span class="info-label">Tipo</span>
              <span class="info-value">{{ unidade.tipo }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Tipologia</span>
              <span class="info-value">{{ unidade.tipologia }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Sigla</span>
              <span class="info-value">{{ unidade.sigla }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Fração Ideal</span>
              <span class="info-value">{{ formatarFracaoIdeal(unidade.fracaoIdeal) }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Localização -->
      <div class="col-12 lg:col-6">
        <div class="detail-card">
          <div class="card-header">
            <i class="pi pi-map-marker"></i>
            <h3>Localização</h3>
          </div>
          <div class="card-body">
            <div class="info-row">
              <span class="info-label">Localização</span>
              <span class="info-value">{{ unidade.localizacao }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Posição Solar</span>
              <span class="info-value">{{ unidade.posicaoSol }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Fachada</span>
              <span class="info-value">{{ unidade.fachada }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Vagas de Garagem</span>
              <span class="info-value garagem">
                <i class="pi pi-car"></i>
                {{ unidade.garagem }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template pTemplate="footer">
    <app-custom-button
      label="Fechar"
      icon="pi pi-times"
      styleClass="p-button-outlined"
      (onClick)="fechar()">
    </app-custom-button>
  </ng-template>
</p-dialog>
